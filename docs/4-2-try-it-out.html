<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="4.2 Try it out | R for Environmental Health Research" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Online booklet for workshop on R for environmental health research, geared to those who already use R for their research but want to learn more tools." />
<meta name="github-repo" content="rstudio/bookdown-demo" />

<meta name="author" content="Brooke Anderson" />

<meta name="date" content="2019-04-09" />


<meta name="description" content="Online booklet for workshop on R for environmental health research, geared to those who already use R for their research but want to learn more tools.">

<title>4.2 Try it out | R for Environmental Health Research</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="toc.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#prerequisites"><span class="toc-section-number">1</span> Prerequisites</a><ul>
<li><a href="1-1-set-up.html#set-up"><span class="toc-section-number">1.1</span> Set-up</a></li>
</ul></li>
<li class="has-sub"><a href="2-organize.html#organize"><span class="toc-section-number">2</span> Organize</a><ul>
<li><a href="2-1-r-projects.html#r-projects"><span class="toc-section-number">2.1</span> R Projects</a></li>
<li class="has-sub"><a href="2-2-directory-organization.html#directory-organization"><span class="toc-section-number">2.2</span> Directory organization</a><ul>
<li><a href="2-2-directory-organization.html#keeping-things-tidy"><span class="toc-section-number">2.2.1</span> Keeping things tidy</a></li>
<li><a href="2-2-directory-organization.html#avoiding-repetition"><span class="toc-section-number">2.2.2</span> Avoiding repetition</a></li>
</ul></li>
<li><a href="2-3-learn-more.html#learn-more"><span class="toc-section-number">2.3</span> Learn more</a></li>
</ul></li>
<li class="has-sub"><a href="3-track.html#track"><span class="toc-section-number">3</span> Track</a><ul>
<li><a href="3-1-git.html#git"><span class="toc-section-number">3.1</span> git</a></li>
<li><a href="3-2-github.html#github"><span class="toc-section-number">3.2</span> GitHub</a></li>
<li class="has-sub"><a href="3-3-terminal.html#terminal"><span class="toc-section-number">3.3</span> Terminal</a><ul>
<li><a href="3-3-terminal.html#accessing-a-bash-shell"><span class="toc-section-number">3.3.1</span> Accessing a Bash Shell</a></li>
<li><a href="3-3-terminal.html#git2r-package"><span class="toc-section-number">3.3.2</span> <code>git2r</code> package</a></li>
</ul></li>
<li><a href="3-4-learn-more-1.html#learn-more-1"><span class="toc-section-number">3.4</span> Learn more</a></li>
</ul></li>
<li class="has-sub"><a href="4-package.html#package"><span class="toc-section-number">4</span> Package</a><ul>
<li class="has-sub"><a href="4-1-components-of-r-packages.html#components-of-r-packages"><span class="toc-section-number">4.1</span> Components of R packages</a><ul>
<li><a href="4-1-components-of-r-packages.html#r-code"><span class="toc-section-number">4.1.1</span> R code</a></li>
<li><a href="4-1-components-of-r-packages.html#description-file"><span class="toc-section-number">4.1.2</span> DESCRIPTION file</a></li>
<li><a href="4-1-components-of-r-packages.html#other-package-components"><span class="toc-section-number">4.1.3</span> Other package components</a></li>
</ul></li>
<li><a href="4-2-try-it-out.html#try-it-out"><span class="toc-section-number">4.2</span> Try it out</a></li>
<li class="has-sub"><a href="4-3-sharing.html#sharing"><span class="toc-section-number">4.3</span> Sharing</a><ul>
<li><a href="4-3-sharing.html#when-to-publish-your-packages"><span class="toc-section-number">4.3.1</span> When to publish your packages</a></li>
<li><a href="4-3-sharing.html#where-to-publish-packages"><span class="toc-section-number">4.3.2</span> Where to publish packages</a></li>
<li><a href="4-3-sharing.html#extra-steps-for-publishing"><span class="toc-section-number">4.3.3</span> Extra steps for publishing</a></li>
</ul></li>
<li><a href="4-4-learn-more-2.html#learn-more-2"><span class="toc-section-number">4.4</span> Learn more</a></li>
</ul></li>
<li class="has-sub"><a href="5-collect.html#collect"><span class="toc-section-number">5</span> Collect</a><ul>
<li class="has-sub"><a href="5-1-open-data.html#open-data"><span class="toc-section-number">5.1</span> Open data</a><ul>
<li><a href="5-1-open-data.html#admin-databases"><span class="toc-section-number">5.1.1</span> [Admin databases?]</a></li>
<li><a href="5-1-open-data.html#research-repositories"><span class="toc-section-number">5.1.2</span> [Research repositories?]</a></li>
</ul></li>
<li><a href="5-2-data-packages.html#data-packages"><span class="toc-section-number">5.2</span> Data packages</a></li>
<li><a href="5-3-web-services.html#web-services"><span class="toc-section-number">5.3</span> Web services [?]</a></li>
<li><a href="5-4-ropensci.html#ropensci"><span class="toc-section-number">5.4</span> ROpenSci</a></li>
<li><a href="5-5-learn-more-3.html#learn-more-3"><span class="toc-section-number">5.5</span> Learn more</a></li>
</ul></li>
<li class="has-sub"><a href="6-process.html#process"><span class="toc-section-number">6</span> Process</a><ul>
<li><a href="6-1-learn-more-4.html#learn-more-4"><span class="toc-section-number">6.1</span> Learn more</a></li>
</ul></li>
<li><a href="7-final-words.html#final-words"><span class="toc-section-number">7</span> Final Words</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="try-it-out" class="section level2">
<h2><span class="header-section-number">4.2</span> Try it out</h2>
<p>I suggest you try out the following steps to experiment with
writing your own package. I’ve included a function for you to build
your package around in the “package.R” file of the R project with
examples for the workshop.</p>
<ul>
<li>Create a new R Project for your R package</li>
<li>Build the package</li>
<li>Move a function into the right place in the package</li>
<li>Edit the DESCRIPTION file as needed</li>
<li>Add example data into the right place in the package</li>
<li>Add some unit tests for the function</li>
<li>Add documentation using roxygen2 notation</li>
<li>Add a short vignette</li>
</ul>
<p>I’ll walk you through the first three steps, and then I suggest you use
Hadley Wickham’s <strong>R Packages</strong> book (see the “Learn More” section) to
get some tips as you try out the rest on your own.</p>
<p><strong>Create a new R Project for an R package.</strong> Open RStudio and go to “File” -&gt;
“New Project”. Choose “New Directory” and then “R Package”. Name your package
“convertr”. Then click on “Create Project”.</p>
<p>The R Project you’ve just created will open in RStudio. If you look in the “R”
subdirectory, you’ll see there’s one file called “hello.R”. There’s also a
subdirectory called “man”and three files in the top directory called
“.Rbuildignore”, “DESCRIPTION”, and “NAMESPACE”.</p>
<p><strong>Build the package.</strong> This project opens with a template—a very small but working package that can
serve as a skeleton as you adapt the files to create your own package. Before you
do anything to change from the template, try building the package using the
<code>build</code> function from the <code>devtools</code> package:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">build</span>()</code></pre>
<p>You should get some output like this:</p>
<pre><code>✔  checking for file ‘/Users/georgianaanderson/Documents/r_workshops/convertr/DESCRIPTION’ ...
─  preparing ‘convertr’:
✔  checking DESCRIPTION meta-information ...
─  checking for LF line-endings in source and make files and shell scripts
─  checking for empty or unneeded directories
─  building ‘convertr_0.1.0.tar.gz’</code></pre>
<p>Congratulations! You’ve built (maybe) your first R package. You should now be able to
load it like any other R package on computer and run its function. Try running:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(convertr)
<span class="kw">hello</span>()</code></pre>
<p>To build the package in a way that you can use it anywhere on your computer,
go to the “Build” tab in RStudio and click “Install and Restart”. As long
as you don’t get warning messages, you should be able to load and use the
package from any R session on your computer.</p>
<p><strong>Move a function into the right place in the package.</strong></p>
<p>Now try adapting the template into your own package. Delete the file
“hello.R” in the “R” subdirectory. Create a new file in this subdirectory
called something like “temp_conversions.R”. Copy the code for the
<code>c_to_f</code> function, which is in the “package.R” file of the R Project
with examples for this workshop. Save the file and rebuild the package,
either with the <code>build</code> call to build within that project or with the
“Install and Restart” button in the “Build” tab to make it available
anywhere on your computer.</p>
</div>
<p style="text-align: center;">
<a href="4-1-components-of-r-packages.html"><button class="btn btn-default">Previous</button></a>
<a href="4-3-sharing.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
